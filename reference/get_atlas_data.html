<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Get ICESat-2 ATLAS data for a specific Date — get_atlas_data • IceSat2R</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Get ICESat-2 ATLAS data for a specific Date — get_atlas_data"><meta property="og:description" content="This function allows the user to download ICESat-2 ATLAS Product data for a specific date, bounding box, track and beam."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">IceSat2R</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/IceSat-2_Atlas_products_HTML.html">ICESat-2 Atlas Products</a>
    </li>
    <li>
      <a href="../articles/IceSat-2_Mission_Orbits_HTML.html">ICESat-2 Mission Orbits</a>
    </li>
    <li>
      <a href="../articles/IceSat-2_Virtual_File_System_Orbits_HTML.html">ICESat-2 Virtual File System Orbits</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/mlampros/IceSat2R/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get ICESat-2 ATLAS data for a specific Date</h1>
    <small class="dont-index">Source: <a href="https://github.com/mlampros/IceSat2R/blob/HEAD/R/get_Atlas_data.R" class="external-link"><code>R/get_Atlas_data.R</code></a></small>
    <div class="hidden name"><code>get_atlas_data.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function allows the user to download ICESat-2 ATLAS Product data for a specific date, bounding box, track and beam.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_atlas_data</span><span class="op">(</span></span>
<span>  <span class="va">minx</span>,</span>
<span>  <span class="va">miny</span>,</span>
<span>  <span class="va">maxx</span>,</span>
<span>  <span class="va">maxy</span>,</span>
<span>  <span class="va">date</span>,</span>
<span>  <span class="va">trackId</span>,</span>
<span>  beamName <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  product <span class="op">=</span> <span class="st">"atl03"</span>,</span>
<span>  client <span class="op">=</span> <span class="st">"portal"</span>,</span>
<span>  photonConfidence <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sampling <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  outputFormat <span class="op">=</span> <span class="st">"csv"</span>,</span>
<span>  file_path_zip <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  download_method <span class="op">=</span> <span class="st">"curl"</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>minx</dt>
<dd><p>the 'minx' parameter of the bounding box</p></dd>


<dt>miny</dt>
<dd><p>the 'miny' parameter of the bounding box</p></dd>


<dt>maxx</dt>
<dd><p>the 'maxx' parameter of the bounding box</p></dd>


<dt>maxy</dt>
<dd><p>the 'maxy' parameter of the bounding box</p></dd>


<dt>date</dt>
<dd><p>a character string specifying the Data collection date in the format 'yyyy-MM-dd' (such as '2020-01-01')</p></dd>


<dt>trackId</dt>
<dd><p>an integer specifying the 'Reference ground track ID' (see the examples section on how to come to the 'trackId' and to a bounding box of 1 or 5 degrees globally)</p></dd>


<dt>beamName</dt>
<dd><p>either NULL (if the 'product' parameter is not equal to 'atl03' which means data for all 6 beams will be returned) or a character string specifying the Beam Name, which can be one of the 'gt1l', 'gt1r', 'gt2l', 'gt2r', 'gt3l' or 'gt3r'</p></dd>


<dt>product</dt>
<dd><p>a character string specifying the input data product (default value is 'atl03'). It can be one of 'atl03', 'atl06', 'atl07', 'atl08', 'atl10', 'atl12' or 'atl13'</p></dd>


<dt>client</dt>
<dd><p>a character string specifying the 'Referring client'. Can be one of 'portal' or 'jupyter' (default is 'portal')</p></dd>


<dt>photonConfidence</dt>
<dd><p>either NULL or a character string specifying the 'Confidence level of the photons'. If NULL (default) all photon data will be returned</p></dd>


<dt>sampling</dt>
<dd><p>a boolean. If TRUE a sampling rate of 1/1000 will be used, otherwise all data will be returned (default is FALSE)</p></dd>


<dt>outputFormat</dt>
<dd><p>a character string specifying the output format of the downloaded data. One of 'csv', 'json' or 'zip'</p></dd>


<dt>file_path_zip</dt>
<dd><p>either NULL or a character string specifying a valid path to the output .zip file. This parameter will normally be a valid path if the 'outputFormat' parameter is set to 'zip'. If it's NULL and the 'outputFormat' parameter is 'zip' then the downloaded '.zip' file will be converted and returned as a data.table object</p></dd>


<dt>download_method</dt>
<dd><p>a character string specifying the download method to use. Can be one of 'internal', 'wininet' (Windows only), 'libcurl', 'wget', 'curl' or 'auto'. For more information see the documentation of the 'utils::download.file()' function</p></dd>


<dt>verbose</dt>
<dd><p>a boolean. If TRUE then information will be printed out in the console</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>if the 'file_path_zip' parameter is NULL it returns either a data.table (if outputFormat is 'csv') or a nested list (if outputFormat is 'json') else the file path where the .zip file is saved. In case that the 'outputFormat' is set to 'zip' and the 'file_path_zip' parameter to NULL then a data.table will be returned.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    
<dl><dt>'atl03', <em>Global Geolocated Photon Data</em> (Version 4, Requests are limited to 1x1 degree spatial bounding box selection <em>unless "sampling" is set to true</em>)</dt>
<dd><p>This data set <em>(ATL03)</em> contains height above the WGS 84 ellipsoid (ITRF2014 reference frame), latitude, longitude, and time for all photons downlinked by the Advanced Topographic Laser Altimeter System (ATLAS) instrument on board the Ice, Cloud and land Elevation Satellite-2 (ICESat-2) observatory. The ATL03 product was designed to be a single source for all photon data and ancillary information needed by higher-level ATLAS/ICESat-2 products. As such, it also includes spacecraft and instrument parameters and ancillary data not explicitly required for ATL03</p></dd>

 <dt>'atl06', <em>Land Ice Height</em> (Version 4, Requests are limited to 5x5 degree spatial bounding box selection)</dt>
<dd><p>This data set <em>(ATL06)</em> provides geolocated, land-ice surface heights (above the WGS 84 ellipsoid, ITRF2014 reference frame), plus ancillary parameters that can be used to interpret and assess the quality of the height estimates. The data were acquired by the Advanced Topographic Laser Altimeter System (ATLAS) instrument on board the Ice, Cloud and land Elevation Satellite-2 (ICESat-2) observatory</p></dd>

 <dt>'atl07', <em>Sea Ice Height</em> (Version 4, Requests are limited to 5x5 degree spatial bounding box selection)</dt>
<dd><p>The data set <em>(ATL07)</em> contains along-track heights for sea ice and open water leads (at varying length scales) relative to the WGS84 ellipsoid (ITRF2014 reference frame) after adjustment for geoidal and tidal variations, and inverted barometer effects. Height statistics and apparent reflectance are also provided. The data were acquired by the Advanced Topographic Laser Altimeter System (ATLAS) instrument on board the Ice, Cloud and land Elevation Satellite-2 (ICESat-2) observatory</p></dd>

 <dt>'atl08', <em>Land and Vegetation Height</em> (Version 4, Requests are limited to 5x5 degree spatial bounding box selection)</dt>
<dd><p>This data set <em>(ATL08)</em> contains along-track heights above the WGS84 ellipsoid (ITRF2014 reference frame) for the ground and canopy surfaces. The canopy and ground surfaces are processed in fixed 100 m data segments, which typically contain more than 100 signal photons. The data were acquired by the Advanced Topographic Laser Altimeter System (ATLAS) instrument on board the Ice, Cloud and land Elevation Satellite-2 (ICESat-2) observatory</p></dd>

 <dt>'atl10', <em>Sea Ice Freeboard</em> (Version 4, Requests are limited to 5x5 degree spatial bounding box selection)</dt>
<dd><p>This data set <em>(ATL10)</em> contains estimates of sea ice freeboard, calculated using three different approaches. Sea ice leads used to establish the reference sea surface and descriptive statistics used in the height estimates are also provided. The data were acquired by the Advanced Topographic Laser Altimeter System (ATLAS) instrument on board the Ice, Cloud and land Elevation Satellite-2 (ICESat-2) observatory</p></dd>

 <dt>'atl12', <em>Ocean Surface Height</em> (Version 4, Requests are limited to 5x5 degree spatial bounding box selection)</dt>
<dd><p>This data set <em>(ATL12)</em> contains along-track sea surface heights at variable length scales over cloud-free regions. Estimates of height distributions, surface roughness, surface slope, and apparent reflectance are also provided. The data were acquired by the Advanced Topographic Laser Altimeter System (ATLAS) instrument on board the Ice, Cloud and land Elevation Satellite-2 (ICESat-2) observatory</p></dd>

 <dt>'atl13', <em>Inland Water Surface Height</em> (Version 4, Requests are limited to 5x5 degree spatial bounding box selection)</dt>
<dd><p>This data set <em>(ATL13)</em> contains along-track water surface heights and descriptive statistics for inland water bodies. Water bodies include lakes, reservoirs, bays, and estuaries. Descriptive statistics include along-track surface slope (where data permit), mean and standard deviation, subsurface signal (532 nm) attenuation, wave height, and coarse depth to bottom topography</p></dd>

 
</dl></div>
    <div id="references">
    <h2>References</h2>
    <p>https://openaltimetry.org/datainfo.html</p>
<p>https://openaltimetry.org/data/swagger-ui/</p>
<p>https://nsidc.org/data/icesat-2</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mlampros/IceSat2R" class="external-link">IceSat2R</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#............................................................</span></span></span>
<span class="r-in"><span><span class="co"># observe the available countries and continents using the</span></span></span>
<span class="r-in"><span><span class="co"># 'rnaturalearth' R package to perform a query using map-edit</span></span></span>
<span class="r-in"><span><span class="co">#............................................................</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">cntr_cnt</span> <span class="op">=</span> <span class="fu">rnaturalearth</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/rnaturalearth/reference/ne_countries.html" class="external-link">ne_countries</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">110</span>,</span></span>
<span class="r-in"><span>                                       type <span class="op">=</span> <span class="st">'countries'</span>,</span></span>
<span class="r-in"><span>                                       returnclass <span class="op">=</span> <span class="st">'sf'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">cntr_cnt</span> <span class="op">=</span> <span class="va">cntr_cnt</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'sovereignt'</span>, <span class="st">'continent'</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># sort(cntr_cnt$sovereignt)</span></span></span>
<span class="r-in"><span><span class="co"># sort(unique(cntr_cnt$continent))</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#............................</span></span></span>
<span class="r-in"><span><span class="co"># Select a 'continent' as AOI   (5-degree query)</span></span></span>
<span class="r-in"><span><span class="co">#............................</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">init</span> <span class="op">=</span> <span class="va"><a href="select_aoi_global_grid.html">select_aoi_global_grid</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>area_of_interest <span class="op">=</span> <span class="st">'Oceania'</span>,</span></span>
<span class="r-in"><span>                                  verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">init</span><span class="op">$</span><span class="fu">draw_edit_aoi</span><span class="op">(</span>degrees <span class="op">=</span> <span class="fl">5.0</span>, square_geoms <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sf_obj</span> <span class="op">=</span> <span class="va">init</span><span class="op">$</span><span class="fu">selected_areas_global_grid</span><span class="op">(</span>plot_data <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sf_obj</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#.....................................................</span></span></span>
<span class="r-in"><span><span class="co"># I drew a bounding box close to 'Mount Hagen Papua'</span></span></span>
<span class="r-in"><span><span class="co"># inside one of the 5-degreee cells (after zooming-in)</span></span></span>
<span class="r-in"><span><span class="co">#.....................................................</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># mapview::mapview(sf_obj, legend = F)</span></span></span>
<span class="r-in"><span><span class="co"># sf::st_as_text(sf::st_geometry(sf_obj))</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#................................................</span></span></span>
<span class="r-in"><span><span class="co"># to reproduce the results without selecting</span></span></span>
<span class="r-in"><span><span class="co"># an area based on the 'draw_edit_aoi()' function</span></span></span>
<span class="r-in"><span><span class="co">#................................................</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plg = "POLYGON ((140 -6.641235, 145 -6.641235, 145 -1.641235, 140 -1.641235, 140 -6.641235))"</span></span></span>
<span class="r-in"><span><span class="co"># sf_obj = sf::st_as_sfc(plg, crs = 4326)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#....................................................</span></span></span>
<span class="r-in"><span><span class="co"># first we find available ICESat-2 track-ID's</span></span></span>
<span class="r-in"><span><span class="co"># and Dates (time interval) from a specific RGT cycle</span></span></span>
<span class="r-in"><span><span class="co">#....................................................</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">approx_date_start</span> <span class="op">=</span> <span class="st">"2021-02-01"</span></span></span>
<span class="r-in"><span><span class="va">approx_date_end</span> <span class="op">=</span> <span class="st">"2021-02-15"</span></span></span>
<span class="r-in"><span><span class="co"># 'RGT_cycle_10'</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">res_rgt_many</span> <span class="op">=</span> <span class="fu"><a href="time_specific_orbits.html">time_specific_orbits</a></span><span class="op">(</span>date_from <span class="op">=</span> <span class="va">approx_date_start</span>,</span></span>
<span class="r-in"><span>                                    date_to <span class="op">=</span> <span class="va">approx_date_end</span>,</span></span>
<span class="r-in"><span>                                    RGT_cycle <span class="op">=</span> <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>                                    download_method <span class="op">=</span> <span class="st">'curl'</span>,</span></span>
<span class="r-in"><span>                                    threads <span class="op">=</span> <span class="fu">parallel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/parallel/detectCores.html" class="external-link">detectCores</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                    verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">res_rgt_many</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#.........................................................</span></span></span>
<span class="r-in"><span><span class="co"># then we create the bounding box of the selected area</span></span></span>
<span class="r-in"><span><span class="co"># and proceed to the intersection with the computed RGT's</span></span></span>
<span class="r-in"><span><span class="co"># ( include the bounding box for reproducibility )</span></span></span>
<span class="r-in"><span><span class="co">#.........................................................</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">bbx_aoi</span> <span class="op">=</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_bbox.html" class="external-link">st_bbox</a></span><span class="op">(</span>obj <span class="op">=</span> <span class="va">sf_obj</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># c(xmin = 140, ymin = -6.641235, xmax = 145, ymax = -1.641235)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">sf_obj_bbx</span> <span class="op">=</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sfc.html" class="external-link">st_as_sfc</a></span><span class="op">(</span><span class="va">bbx_aoi</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">res_inters</span> <span class="op">=</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_binary_pred.html" class="external-link">st_intersects</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">sf_obj_bbx</span>,</span></span>
<span class="r-in"><span>                               y <span class="op">=</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">res_rgt_many</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                               sparse <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#.....................</span></span></span>
<span class="r-in"><span><span class="co"># matched (RGT) tracks</span></span></span>
<span class="r-in"><span><span class="co">#.....................</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df_inters</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">res_inters</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">df_inters</span><span class="op">)</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"There is no intersection between the specified AOI and the RGTs!"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">rgt_subs</span> <span class="op">=</span> <span class="va">res_rgt_many</span><span class="op">[</span><span class="va">df_inters</span><span class="op">$</span><span class="va">col.id</span>, , drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">rgt_subs</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#..........................................</span></span></span>
<span class="r-in"><span><span class="co"># find out which of the time specific RGT's</span></span></span>
<span class="r-in"><span><span class="co"># match the OpenAltimetry Track-ID's</span></span></span>
<span class="r-in"><span><span class="co">#..........................................</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">dtbl_rgts</span> <span class="op">=</span> <span class="fu"><a href="verify_RGTs.html">verify_RGTs</a></span><span class="op">(</span>nsidc_rgts <span class="op">=</span> <span class="va">rgt_subs</span>,</span></span>
<span class="r-in"><span>                        bbx_aoi <span class="op">=</span> <span class="va">bbx_aoi</span>,</span></span>
<span class="r-in"><span>                        verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#...................................</span></span></span>
<span class="r-in"><span><span class="co"># we will iterate over the available:</span></span></span>
<span class="r-in"><span><span class="co">#    - Dates</span></span></span>
<span class="r-in"><span><span class="co">#    - trackId's</span></span></span>
<span class="r-in"><span><span class="co">#    - product's</span></span></span>
<span class="r-in"><span><span class="co"># to gather the up to 5-degree data</span></span></span>
<span class="r-in"><span><span class="co">#..................................</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">dates_iters</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">dtbl_rgts</span><span class="op">$</span><span class="va">Date_time</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">RGTs_iters</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">dtbl_rgts</span><span class="op">$</span><span class="va">RGT_NSIDC</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">prods_5_degrs</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'atl06'</span>, <span class="st">'atl07'</span>, <span class="st">'atl08'</span>, <span class="st">'atl10'</span>, <span class="st">'atl12'</span>, <span class="st">'atl13'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">dat_out</span> <span class="op">=</span> <span class="va">logs_out</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">for</span> <span class="op">(</span><span class="va">idx</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">dates_iters</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">date_i</span> <span class="op">=</span> <span class="va">dates_iters</span><span class="op">[</span><span class="va">idx</span><span class="op">]</span></span></span>
<span class="r-in"><span>  <span class="va">rgt_i</span> <span class="op">=</span> <span class="va">RGTs_iters</span><span class="op">[</span><span class="va">idx</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="kw">for</span> <span class="op">(</span><span class="va">prod_i</span> <span class="kw">in</span> <span class="va">prods_5_degrs</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>    <span class="va">name_iter</span> <span class="op">=</span> <span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></span><span class="op">(</span><span class="st">"{date_i}_{rgt_i}_{prod_i}"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></span><span class="op">(</span><span class="st">"Date: '{date_i}'  RGT: '{rgt_i}'  Product: '{prod_i}'"</span><span class="op">)</span>, <span class="st">'\n'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>    <span class="va">iter_dat</span> <span class="op">=</span> <span class="fu">get_atlas_data</span><span class="op">(</span>minx <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">bbx_aoi</span><span class="op">[</span><span class="st">'xmin'</span><span class="op">]</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                              miny <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">bbx_aoi</span><span class="op">[</span><span class="st">'ymin'</span><span class="op">]</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                              maxx <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">bbx_aoi</span><span class="op">[</span><span class="st">'xmax'</span><span class="op">]</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                              maxy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">bbx_aoi</span><span class="op">[</span><span class="st">'ymax'</span><span class="op">]</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                              date <span class="op">=</span> <span class="va">date_i</span>,</span></span>
<span class="r-in"><span>                              trackId <span class="op">=</span> <span class="va">rgt_i</span>,</span></span>
<span class="r-in"><span>                              product <span class="op">=</span> <span class="va">prod_i</span>,</span></span>
<span class="r-in"><span>                              client <span class="op">=</span> <span class="st">'portal'</span>,</span></span>
<span class="r-in"><span>                              outputFormat <span class="op">=</span> <span class="st">'csv'</span>,</span></span>
<span class="r-in"><span>                              verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>    <span class="va">iter_logs</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Date <span class="op">=</span> <span class="va">date_i</span>,</span></span>
<span class="r-in"><span>                     RGT <span class="op">=</span> <span class="va">rgt_i</span>,</span></span>
<span class="r-in"><span>                     Product <span class="op">=</span> <span class="va">prod_i</span>,</span></span>
<span class="r-in"><span>                     N_rows <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">iter_dat</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>    <span class="va">logs_out</span><span class="op">[[</span><span class="va">name_iter</span><span class="op">]</span><span class="op">]</span> <span class="op">=</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setDT.html" class="external-link">setDT</a></span><span class="op">(</span><span class="va">iter_logs</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="va">dat_out</span><span class="op">[[</span><span class="va">name_iter</span><span class="op">]</span><span class="op">]</span> <span class="op">=</span> <span class="va">iter_dat</span></span></span>
<span class="r-in"><span>  <span class="op">}</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#.........................................</span></span></span>
<span class="r-in"><span><span class="co"># each sublist corresponds to a different</span></span></span>
<span class="r-in"><span><span class="co"># parameter setting (Date, Track, Product)</span></span></span>
<span class="r-in"><span><span class="co">#.........................................</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">dat_out</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#.....</span></span></span>
<span class="r-in"><span><span class="co"># Logs  (including the number of rows for each parameter setting)</span></span></span>
<span class="r-in"><span><span class="co">#.....</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">dtbl_logs</span> <span class="op">=</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/rbindlist.html" class="external-link">rbindlist</a></span><span class="op">(</span><span class="va">logs_out</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dtbl_logs</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">dtbl_logs</span>, <span class="va">N_rows</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dtbl_logs</span> <span class="op">=</span> <span class="va">dtbl_logs</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="va">dtbl_logs</span><span class="op">$</span><span class="va">N_rows</span>, decreasing <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>, <span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">dtbl_logs</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#.............................................</span></span></span>
<span class="r-in"><span><span class="co"># The Products 'atl08' and 'atl13' have data</span></span></span>
<span class="r-in"><span><span class="co"># for the Dates and RGT's of the selected area</span></span></span>
<span class="r-in"><span><span class="co">#.............................................</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">dtbl_logs</span><span class="op">$</span><span class="va">Product</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># c('atl08', 'atl13')</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#................</span></span></span>
<span class="r-in"><span><span class="co"># RGT's with data</span></span></span>
<span class="r-in"><span><span class="co">#................</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">dtbl_logs</span><span class="op">$</span><span class="va">RGT</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># c(627, 756, 688, 619, 817)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#................</span></span></span>
<span class="r-in"><span><span class="co"># Dates with Data</span></span></span>
<span class="r-in"><span><span class="co">#................</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">dtbl_logs</span><span class="op">$</span><span class="va">Date</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># c("2021-02-03", "2021-02-11", "2021-02-07", "2021-02-02", "2021-02-15")</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Lampros Mouselimis.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

